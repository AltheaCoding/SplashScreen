<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="https://github.com/AltheaCoding/image-hosting/blob/main/QRARicon.png?raw=true" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QRAR Lost & Found Center</title>
    <link rel="preload" href="https://github.com/AltheaCoding/SplashScreen/blob/main/ThreeSteps.gif?raw=true" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!-- Babel to transpile JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-cyan-50">
    <div id="root"></div>

    <script type="text/babel">
      // De-structure React hooks for convenience
      const { useState, useEffect } = React;

      // --- From components/Icons.tsx ---
      const ShieldCheckIcon = ({ className }) => (
        <svg 
          xmlns="http://www.w3.org/2000/svg" 
          viewBox="0 0 24 24" 
          fill="currentColor" 
          className={`w-5 h-5 ${className}`}
        >
          <path fillRule="evenodd" d="M12 1.5a.75.75 0 01.75.75v1.511c.75.113 1.47.365 2.164.739a.75.75 0 01-.288 1.423A6.743 6.743 0 0012 5.25a6.743 6.743 0 00-2.625.923.75.75 0 01-.288-1.423 8.22 8.22 0 012.164-.74V2.25A.75.75 0 0112 1.5zm-3.834 6.012a.75.75 0 011.06 0l1.244 1.243 2.2-2.201a.75.75 0 011.062 1.06l-2.75 2.75a.75.75 0 01-1.06 0L8.166 9.632a.75.75 0 010-1.06z" clipRule="evenodd" />
          <path d="M3.283 8.943c.095-.246.223-.483.374-.707l.001-.002 4.474-6.102a.75.75 0 011.23.906L5.34 9.402a.75.75 0 01-1.23-.906l-.002.002c-.08-.108-.155-.219-.224-.332a5.25 5.25 0 00-5.83-8.683.75.75 0 01-.58 1.353 6.75 6.75 0 017.514 11.086 44.92 44.92 0 01.488 1.493.75.75 0 11-1.423.493 46.409 46.409 0 00-.47-1.442l-.003-.007a5.25 5.25 0 00-6.815-9.45zM20.717 8.943c-.095-.246-.223-.483-.374-.707l-.001-.002-4.474-6.102a.75.75 0 00-1.23.906L18.66 9.402a.75.75 0 001.23-.906l.002.002c.08-.108.155-.219.224-.332a5.25 5.25 0 015.83-8.683.75.75 0 00.58 1.353 6.75 6.75 0 00-7.514 11.086 44.92 44.92 0 00-.488 1.493.75.75 0 101.423.493 46.409 46.409 0 01.47-1.442l.003-.007a5.25 5.25 0 016.815-9.45z" />
        </svg>
      );

      const CloseIcon = ({ className }) => (
        <svg 
          xmlns="http://www.w3.org/2000/svg" 
          fill="none" 
          viewBox="0 0 24 24" 
          strokeWidth={1.5} 
          stroke="currentColor" 
          className={`w-6 h-6 ${className}`}
        >
          <path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      );

      const ChevronDownIcon = ({ className }) => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          strokeWidth={1.5}
          stroke="currentColor"
          className={`w-6 h-6 ${className}`}
        >
          <path strokeLinecap="round" strokeLinejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
        </svg>
      );

      // --- From components/Buttons.tsx ---
      const LineButton = ({ children, disabled, ...props }) => {
        return (
          <button
            {...props}
            disabled={disabled}
            className={`w-full flex items-center justify-center gap-2 font-bold py-3 px-4 rounded-full shadow-md hover:shadow-lg focus:outline-none focus:ring-4 transition-all duration-300 ease-in-out transform hover:scale-105
              ${disabled
                ? 'bg-stone-200 text-stone-400 cursor-not-allowed'
                : 'bg-[#06C755] text-white focus:ring-[#06C755]/50'
              }
            `}
          >
            {children}
          </button>
        );
      };

      const PrimaryButton = ({ children, disabled, ...props }) => {
        return (
          <button
            {...props}
            disabled={disabled}
            className={`w-full flex items-center justify-center gap-3 font-bold py-3 px-4 rounded-lg focus:outline-none focus:ring-4 transition-all duration-300 ease-in-out transform hover:scale-105
              ${disabled
                ? 'bg-stone-200 text-stone-400 cursor-not-allowed'
                : 'bg-amber-700 text-white hover:bg-amber-800 focus:ring-amber-600/50'
              }
            `}
          >
            {children}
          </button>
        );
      };
      
      const SecondaryButton = ({ children, className, ...props }) => {
        return (
          <button
            {...props}
            style={{ backgroundColor: '#FBF8F1' }}
            className={`w-full flex items-center justify-center gap-3 text-stone-800 font-bold py-3 px-4 rounded-full shadow-md hover:shadow-lg hover:brightness-95 focus:outline-none focus:ring-4 focus:ring-amber-200/50 transition-all duration-300 ease-in-out transform hover:scale-105 ${className || ''}`}
          >
            {children}
          </button>
        );
      };

      // --- From components/DirectContactForm.tsx ---
      const DirectContactForm = () => {
        const [message, setMessage] = useState('');
        const [contact, setContact] = useState('');

        const isButtonDisabled = message.trim() === '';
        
        const handleSubmit = () => {
            alert('Message sent!');
            setMessage('');
            setContact('');
        };

        return (
          <div className="space-y-6">
              <header className="text-center">
                <h2 className="text-xl font-bold text-white">沒有Line，要留言</h2>
              </header>

              <form className="space-y-4" onSubmit={(e) => e.preventDefault()}>
                <div>
                  <label htmlFor="contact-method" className="block text-sm font-medium text-stone-300 mb-1">聯絡方式 (可不填)</label>
                  <input 
                    type="text" 
                    id="contact-method"
                    placeholder="例如：Email 或 其他通訊軟體"
                    className="w-full px-3 py-2 border border-stone-300 text-stone-900 placeholder:text-stone-500 rounded-md focus:ring-amber-500 focus:border-amber-500 transition"
                    style={{ backgroundColor: '#fffbeb' }}
                    value={contact}
                    onChange={(e) => setContact(e.target.value)}
                  />
                </div>
                <div>
                  <label htmlFor="message" className="block text-sm font-medium text-stone-300 mb-1">您的訊息</label>
                  <textarea 
                    id="message" 
                    rows={4}
                    placeholder="請在此輸入您想傳達給失主的訊息..."
                    className="w-full px-3 py-2 border border-stone-300 text-stone-900 placeholder:text-stone-500 rounded-md focus:ring-amber-500 focus:border-amber-500 transition"
                    style={{ backgroundColor: '#fffbeb' }}
                    required
                    value={message}
                    onChange={(e) => setMessage(e.target.value)}
                  ></textarea>
                </div>
                <PrimaryButton 
                  onClick={handleSubmit}
                  disabled={isButtonDisabled}
                >
                  傳送匿名訊息
                </PrimaryButton>
              </form>

              <p className="text-xs text-center text-stone-400">
                您的聯絡方式將被加密處理，僅用於本次協尋聯繫。
              </p>
          </div>
        );
    };

      // --- From components/FAQ.tsx ---
      const faqData = [
        {
          question: 'Q1：如果我趕時間，或失主沒有馬上回覆我怎麼辦？',
          answer: 'A：我們完全理解。最好的做法是，您可以先將失物或孩童帶至附近最方便的警察局、捷運站或連鎖超商的服務台暫時安置，然後再透過本系統留言告知失主您放置的確切地點。您的幫助依然非常重要！'
        },
        {
          question: 'Q2：為什麼建議使用 LINE 聯繫？',
          answer: 'A：在台灣，Line是最多人使用的通訊軟體。使用 LINE 是最即時、最方便的方式。您可以快速傳送當下的 GPS 地點，這對焦急的失主來說是極有價值的資訊。同樣地，整個過程是完全匿名的，您的 LINE 隱私會受到完整的保護。'
        },
        {
          question: 'Q3：如果失主提出不合理的要求（例如要我把東西送到很遠的地方）怎麼辦？',
          answer: 'A：請以您自身的安全與方便為最高原則。您沒有義務滿足任何不合理的要求。將物品交由公正的第三方（如警察局）是我們最推薦的安全作法。'
        },
        {
          question: 'Q4：這是什麼？我為什麼應該信任這個網站？',
          answer: 'A：這是 QRAR 安心找回中心的官方協尋頁面。我們是一個專注於協尋失物與走散親友的安全平台。所有訊息都會以匿名、加密的方式轉達給失主，我們也絕不會向您索取個資或金融資訊，請您安心'
        },
      ];

      const FAQItem = ({ item, isOpen, onClick, isDark }) => {
        const textColor = isDark ? 'text-stone-200 hover:text-amber-400' : 'text-stone-700 hover:text-amber-700';
        const answerColor = isDark ? 'text-stone-300' : 'text-stone-600';
        const iconColor = isDark ? 'text-stone-500' : 'text-stone-400';
        const borderColor = isDark ? 'border-stone-700' : 'border-stone-200';
        
        return (
          <div className={`border-b ${borderColor} last:border-b-0`}>
            <button 
              onClick={onClick} 
              className={`w-full flex justify-between items-center text-left font-semibold ${textColor} py-4 focus:outline-none transition-colors`}
              aria-expanded={isOpen}
            >
              <span className="pr-4">{item.question}</span>
              <ChevronDownIcon className={`w-5 h-5 ${iconColor} flex-shrink-0 transform transition-transform duration-300 ${isOpen ? 'rotate-180' : ''}`} />
            </button>
            <div className={`overflow-hidden transition-all duration-500 ease-in-out ${isOpen ? 'max-h-screen pb-4' : 'max-h-0'}`}>
              <p className={`${answerColor} text-sm leading-relaxed`}>
                {item.answer}
              </p>
            </div>
          </div>
        );
      };

      const FAQ = ({ isDark }) => {
        const [activeIndex, setActiveIndex] = useState(null);

        const handleToggle = (index) => {
          setActiveIndex(activeIndex === index ? null : index);
        };

        const headerColor = isDark ? 'text-white' : 'text-stone-800';

        return (
          <section className="pt-4">
            <h2 className={`text-xl font-bold ${headerColor} mb-2 text-center`}>Q&A</h2>
            <div>
              {faqData.map((item, index) => (
                <FAQItem 
                  key={index}
                  item={item}
                  isOpen={activeIndex === index}
                  onClick={() => handleToggle(index)}
                  isDark={isDark}
                />
              ))}
            </div>
          </section>
        );
      };
      
      // --- New HeroImage component ---
      const HeroImage = () => {
          const [isLoaded, setIsLoaded] = useState(false);
          const imageUrl = "https://github.com/AltheaCoding/SplashScreen/blob/main/ThreeSteps.gif?raw=true";

          useEffect(() => {
              // This avoids creating multiple style tags if the component re-renders.
              if (document.getElementById('pulse-animation-style')) return;

              const style = document.createElement('style');
              style.id = 'pulse-animation-style';
              style.textContent = `
                  @keyframes pulse {
                      50% { opacity: .5; }
                  }
                  .animate-pulse-fast {
                      animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
                  }
              `;
              document.head.append(style);
          }, []);

          return (
              <div>
                  {/* The container maintains the aspect ratio and clips the scaled image */}
                  <div 
                      className="relative w-full rounded-xl transform scale-110 overflow-hidden" 
                      style={{ paddingTop: '56.25%' /* 16:9 Aspect Ratio */ }}
                  >
                      {/* Placeholder with a pulsing animation */}
                      {!isLoaded && (
                          <div className="absolute top-0 left-0 w-full h-full bg-stone-200 animate-pulse-fast"></div>
                      )}
                      
                      {/* The actual image, fades in when loaded */}
                      <img 
                          src={imageUrl} 
                          alt="Animated GIF showing the three steps: 1. Scan QR Code, 2. Contact Anonymously, 3. Help is on the way."
                          onLoad={() => setIsLoaded(true)}
                          className={`absolute top-0 left-0 w-full h-full object-cover transition-opacity duration-500 ease-in-out ${isLoaded ? 'opacity-100' : 'opacity-0'}`}
                      />
                  </div>
                  <p className="text-center text-stone-600 font-semibold mt-4">此 QR code 可協助尋找失物或走散親友。</p>
              </div>
          );
      };


      // --- From App.tsx ---
      const App = () => {
        return (
          <div className="min-h-screen bg-cyan-50 flex items-center justify-center p-4 font-sans">
            <main className="bg-white rounded-2xl shadow-lg w-full max-w-md mx-auto overflow-hidden">
              <header 
                className="flex justify-between items-center py-4 px-6"
                style={{ backgroundColor: '#fffbeb' }}
              >
                <div className="flex items-center gap-3">
                  <img 
                      src="https://github.com/AltheaCoding/image-hosting/blob/main/Solution_%20(5).PNG?raw=true" 
                      alt="QRAR Logo" 
                      className="h-8 w-auto"
                  />
                  <div>
                      <p className="text-xl font-bold text-stone-800 leading-tight">qrar.com</p>
                      <p className="text-base text-stone-600 font-semibold leading-tight">安心找回中心</p>
                  </div>
                </div>
                <p className="text-xl font-bold text-amber-700">感謝您熱心幫助!</p>
              </header>
              
              <div className="p-6 md:p-8 space-y-6">
                <HeroImage />
              
                <div className="space-y-4 pt-4">
                  <div>
                    <LineButton onClick={() => alert('Redirecting to LINE...')}>
                      <img src="https://github.com/AltheaCoding/image-hosting/blob/main/line_132.png?raw=true" alt="LINE icon" className="w-6 h-6" />
                      <span> Line 匿名 傳送</span>
                    </LineButton>
                    <p className="text-center text-xs text-stone-500 mt-2 px-4">
                      幫助完成後將贈送 100 則訊息額度。
                    </p>
                  </div>
                </div>
              </div>
              
              <div className="p-6 md:p-8 space-y-6" style={{ backgroundColor: '#222b45' }}>
                <DirectContactForm />
                
                <footer 
                  className="pt-4 text-left space-y-1 text-stone-300 text-xs"
                >
                  <p>安全提醒：請認明 <a href="https://qrar.com" target="_blank" rel="noopener noreferrer" className="underline hover:text-amber-400 transition-colors">https://qrar.com</a> 官方網址。</p>
                  <p>本系統絕不會向您索取個資、密碼或金融帳戶。有任何疑慮請直撥 165 反詐騙專線。</p>
                </footer>
                
                <FAQ isDark={true} />
              </div>
            </main>
          </div>
        );
      };
      
      // --- From index.tsx ---
      const rootElement = document.getElementById('root');
      const root = ReactDOM.createRoot(rootElement);
      root.render(<App />);

    </script>
  </body>
</html>
